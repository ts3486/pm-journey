use serde::{Deserialize, Serialize};
use utoipa::ToSchema;

#[derive(Debug, Serialize, Deserialize, ToSchema, Clone, PartialEq, Eq)]
#[serde(rename_all = "snake_case")]
pub enum PmbokKnowledgeArea {
    Integration,
    Scope,
    Schedule,
    Cost,
    Quality,
    Resource,
    Communication,
    Risk,
    Procurement,
    Stakeholder,
}

#[derive(Debug, Serialize, Deserialize, ToSchema, Clone, PartialEq, Eq)]
#[serde(rename_all = "kebab-case")]
pub enum ScenarioType {
    Basic,
    TestCase,
}

#[derive(Debug, Serialize, Deserialize, ToSchema, Clone)]
#[serde(rename_all = "camelCase")]
pub struct FeatureMockup {
    pub component: String,
    pub description: String,
}

#[derive(Debug, Serialize, Deserialize, ToSchema, Clone)]
#[serde(rename_all = "camelCase")]
pub struct Scenario {
    pub id: String,
    pub title: String,
    pub discipline: ScenarioDiscipline,
    pub description: String,
    #[serde(skip_serializing_if = "Option::is_none", default)]
    #[serde(alias = "scenario_type")]
    pub scenario_type: Option<ScenarioType>,
    #[serde(skip_serializing_if = "Option::is_none", default)]
    #[serde(alias = "feature_mockup")]
    pub feature_mockup: Option<FeatureMockup>,
    pub product: ProductInfo,
    pub mode: String,
    #[serde(default)]
    pub behavior: ScenarioBehavior,
    #[serde(alias = "kickoff_prompt")]
    pub kickoff_prompt: String,
    #[serde(alias = "evaluation_criteria")]
    pub evaluation_criteria: Vec<EvaluationCategory>,
    #[serde(alias = "passing_score")]
    pub passing_score: Option<f32>,
    pub missions: Option<Vec<Mission>>,
    #[serde(alias = "supplemental_info")]
    pub supplemental_info: Option<String>,
    #[serde(skip_serializing_if = "Option::is_none", default)]
    #[serde(alias = "pmbok_knowledge_areas")]
    pub pmbok_knowledge_areas: Option<Vec<PmbokKnowledgeArea>>,
}

#[derive(Debug, Serialize, Deserialize, ToSchema, Clone)]
#[serde(rename_all = "camelCase")]
pub struct ProductInfo {
    pub name: String,
    pub summary: String,
    pub audience: String,
    pub problems: Vec<String>,
    pub goals: Vec<String>,
    pub differentiators: Vec<String>,
    pub scope: Vec<String>,
    pub constraints: Vec<String>,
    pub timeline: String,
    #[serde(alias = "success_criteria")]
    pub success_criteria: Vec<String>,
    #[serde(alias = "unique_edge")]
    pub unique_edge: Option<String>,
    #[serde(alias = "tech_stack")]
    pub tech_stack: Option<Vec<String>>,
    #[serde(alias = "core_features")]
    pub core_features: Option<Vec<String>>,
}

#[derive(Debug, Serialize, Deserialize, ToSchema, Clone, PartialEq, Eq)]
#[serde(rename_all = "lowercase")]
pub enum SessionStatus {
    Active,
    Completed,
    Evaluated,
}

#[derive(Debug, Serialize, Deserialize, ToSchema, Clone)]
#[serde(rename_all = "camelCase")]
pub struct ProgressFlags {
    pub requirements: bool,
    pub priorities: bool,
    pub risks: bool,
    pub acceptance: bool,
}

#[derive(Debug, Serialize, Deserialize, ToSchema, Clone)]
#[serde(rename_all = "camelCase")]
pub struct Session {
    pub id: String,
    #[serde(alias = "scenario_id")]
    pub scenario_id: String,
    #[serde(alias = "scenario_discipline")]
    pub scenario_discipline: Option<ScenarioDiscipline>,
    pub status: SessionStatus,
    #[serde(alias = "started_at")]
    pub started_at: String,
    #[serde(alias = "ended_at")]
    pub ended_at: Option<String>,
    #[serde(alias = "last_activity_at")]
    pub last_activity_at: String,
    #[serde(alias = "user_name")]
    pub user_name: Option<String>,
    #[serde(alias = "progress_flags")]
    pub progress_flags: ProgressFlags,
    #[serde(alias = "evaluation_requested")]
    pub evaluation_requested: bool,
    #[serde(alias = "mission_status")]
    pub mission_status: Option<Vec<MissionStatus>>,
    #[serde(alias = "organization_id")]
    pub organization_id: Option<String>,
}

#[derive(Debug, Serialize, Deserialize, ToSchema, Clone, PartialEq, Eq)]
#[serde(rename_all = "snake_case")]
pub enum MessageRole {
    User,
    Agent,
    System,
}

#[derive(Debug, Serialize, Deserialize, ToSchema, Clone, PartialEq, Eq)]
#[serde(rename_all = "snake_case")]
pub enum MessageTag {
    Decision,
    Assumption,
    Risk,
    NextAction,
    Summary,
}

#[derive(Debug, Serialize, Deserialize, ToSchema, Clone)]
#[serde(rename_all = "camelCase")]
pub struct Message {
    pub id: String,
    #[serde(alias = "session_id")]
    pub session_id: String,
    pub role: MessageRole,
    pub content: String,
    #[serde(alias = "created_at")]
    pub created_at: String,
    pub tags: Option<Vec<MessageTag>>,
    #[serde(alias = "queued_offline")]
    pub queued_offline: Option<bool>,
}

#[derive(Debug, Serialize, Deserialize, ToSchema, Clone)]
#[serde(rename_all = "camelCase")]
pub struct EvaluationCategory {
    pub name: String,
    pub weight: f32,
    pub score: Option<f32>,
    pub feedback: Option<String>,
}

#[derive(Debug, Serialize, Deserialize, ToSchema, Clone)]
#[serde(rename_all = "camelCase")]
pub struct Evaluation {
    #[serde(alias = "session_id")]
    pub session_id: String,
    #[serde(alias = "overall_score")]
    pub overall_score: Option<f32>,
    pub passing: Option<bool>,
    pub categories: Vec<EvaluationCategory>,
    pub summary: Option<String>,
    #[serde(alias = "improvement_advice")]
    pub improvement_advice: Option<String>,
}

#[derive(Debug, Serialize, Deserialize, ToSchema, Clone)]
#[serde(rename_all = "camelCase")]
pub struct Mission {
    pub id: String,
    pub title: String,
    pub description: Option<String>,
    pub order: i32,
}

#[derive(Debug, Serialize, Deserialize, ToSchema, Clone)]
#[serde(rename_all = "camelCase")]
pub struct MissionStatus {
    #[serde(alias = "mission_id")]
    pub mission_id: String,
    #[serde(alias = "completed_at")]
    pub completed_at: Option<String>,
}

#[derive(Debug, Serialize, Deserialize, ToSchema, Clone)]
#[serde(rename_all = "camelCase")]
pub struct HistoryItem {
    #[serde(alias = "session_id")]
    pub session_id: String,
    #[serde(alias = "scenario_id")]
    pub scenario_id: Option<String>,
    #[serde(alias = "scenario_discipline")]
    pub scenario_discipline: Option<ScenarioDiscipline>,
    pub metadata: HistoryMetadata,
    pub actions: Vec<Message>,
    pub evaluation: Option<Evaluation>,
    #[serde(alias = "storage_location")]
    pub storage_location: Option<String>,
    pub comments: Option<Vec<ManagerComment>>,
}

#[derive(Debug, Serialize, Deserialize, ToSchema, Clone)]
#[serde(rename_all = "camelCase")]
pub struct HistoryMetadata {
    pub duration: Option<f32>,
    #[serde(rename = "messageCount", alias = "message_count")]
    pub message_count: Option<u64>,
    #[serde(rename = "startedAt", alias = "started_at")]
    pub started_at: Option<String>,
}

#[derive(Debug, Serialize, Deserialize, ToSchema, Clone)]
#[serde(rename_all = "camelCase")]
pub struct ManagerComment {
    pub id: String,
    #[serde(alias = "session_id")]
    pub session_id: String,
    #[serde(alias = "author_name")]
    pub author_name: Option<String>,
    #[serde(alias = "author_user_id")]
    pub author_user_id: Option<String>,
    #[serde(alias = "author_role")]
    pub author_role: Option<String>,
    pub content: String,
    #[serde(alias = "created_at")]
    pub created_at: String,
}

#[derive(Debug, Serialize, Deserialize, ToSchema, Clone)]
#[serde(rename_all = "camelCase")]
pub struct TestCase {
    pub id: String,
    #[serde(alias = "session_id")]
    pub session_id: String,
    pub name: String,
    pub preconditions: String,
    pub steps: String,
    #[serde(alias = "expected_result")]
    pub expected_result: String,
    #[serde(alias = "created_at")]
    pub created_at: String,
}

#[derive(Debug, Serialize, Deserialize, ToSchema, Clone, PartialEq, Eq)]
#[serde(rename_all = "lowercase")]
pub enum OutputKind {
    Text,
    Url,
    Image,
}

impl OutputKind {
    pub fn as_str(&self) -> &str {
        match self {
            OutputKind::Text => "text",
            OutputKind::Url => "url",
            OutputKind::Image => "image",
        }
    }

    pub fn from_str(s: &str) -> Option<Self> {
        match s {
            "text" => Some(OutputKind::Text),
            "url" => Some(OutputKind::Url),
            "image" => Some(OutputKind::Image),
            _ => None,
        }
    }
}

#[derive(Debug, Serialize, Deserialize, ToSchema, Clone)]
#[serde(rename_all = "camelCase")]
pub struct Output {
    pub id: String,
    #[serde(alias = "session_id")]
    pub session_id: String,
    pub kind: OutputKind,
    pub value: String,
    pub note: Option<String>,
    #[serde(alias = "created_by_user_id")]
    pub created_by_user_id: String,
    #[serde(alias = "created_at")]
    pub created_at: String,
}

#[derive(Debug, Serialize, Deserialize, ToSchema, Clone, PartialEq, Eq)]
#[serde(rename_all = "UPPERCASE")]
pub enum ScenarioDiscipline {
    Basic,
    Challenge,
}

fn scenario_type_for_id(id: &str) -> Option<ScenarioType> {
    if id.starts_with("basic-") {
        Some(ScenarioType::Basic)
    } else if id.starts_with("test-") {
        Some(ScenarioType::TestCase)
    } else {
        None
    }
}

pub fn default_scenarios() -> Vec<Scenario> {
    let mut scenarios = vec![
        Scenario {
            id: "basic-intro-alignment".to_string(),
            title: "自己紹介＆期待値合わせ".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "新規プロジェクトに合流し、役割と成功条件を30分で擦り合わせる。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "オンボーディングワークショップ".to_string(),
                summary: "ステークホルダーと目的・役割・進め方を合意する初回ミーティング。".to_string(),
                audience: "プロダクトオーナー、開発リーダー、QA".to_string(),
                problems: vec!["役割が不明瞭".to_string(), "優先度の解像度が低い".to_string()],
                goals: vec!["役割・責任の明確化".to_string(), "初期コミュニケーション計画の合意".to_string()],
                differentiators: vec!["シンプルな準備リスト".to_string(), "会話テンプレート".to_string()],
                scope: vec!["自己紹介".to_string(), "目的確認".to_string(), "進め方合意".to_string()],
                constraints: vec!["30分タイムボックス".to_string(), "参加者3名想定".to_string()],
                timeline: "初回ミーティング当日".to_string(),
                success_criteria: vec!["期待値の一致が確認できる".to_string(), "次アクションが2件以上決定".to_string()],
                unique_edge: Some("短時間で役割と進め方を固める練習に特化".to_string()),
                tech_stack: Some(vec!["Next.js".to_string(), "Axum".to_string()]),
                core_features: Some(vec!["メモ".to_string(), "アクション記録".to_string()]),
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "あなたは新規PJに参加するPM/PMOとして、初回ミーティングで役割と期待値を揃えます。短時間で目的・進め方・次アクションを決めてください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "basic-intro-m1".to_string(), title: "自己紹介を行う".to_string(), description: None, order: 1 },
            ]),
            supplemental_info: Some("時間配分（5分自己紹介/15分期待値/10分次アクション）を意識してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "basic-meeting-minutes".to_string(),
            title: "議事メモの作成と共有".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "会議内容を要点・決定・アクションに整理し共有する。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "議事メモテンプレ".to_string(),
                summary: "会議内容を決定/未決/アクションに整理し、共有しやすくする。".to_string(),
                audience: "プロジェクトメンバー、関係者".to_string(),
                problems: vec!["決定事項が伝わらない".to_string(), "担当が曖昧".to_string(), "共有が遅い".to_string()],
                goals: vec!["決定事項の可視化".to_string(), "担当・期日の明記".to_string(), "共有スピード向上".to_string()],
                differentiators: vec!["決定事項テンプレ".to_string(), "アクション欄".to_string()],
                scope: vec!["決定事項整理".to_string(), "未決事項整理".to_string(), "アクション明記".to_string()],
                constraints: vec!["会議終了後30分以内に共有".to_string(), "関係者10名".to_string()],
                timeline: "会議当日中".to_string(),
                success_criteria: vec!["決定事項とアクションが明文化".to_string(), "関係者に共有済み".to_string()],
                unique_edge: Some("議事メモ作成に集中".to_string()),
                tech_stack: Some(vec!["Next.js".to_string(), "Axum".to_string()]),
                core_features: Some(vec!["議事メモ欄".to_string(), "アクションチェック".to_string()]),
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "あなたはPMとして会議内容を議事メモに整理します。決定事項・未決事項・次アクションと担当を明記し、共有用のまとめを作成してください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "basic-minutes-m1".to_string(), title: "決定事項と未決事項を整理する".to_string(), description: None, order: 1 },
                Mission { id: "basic-minutes-m2".to_string(), title: "次アクションと担当・期日を明記する".to_string(), description: None, order: 2 },
                Mission { id: "basic-minutes-m3".to_string(), title: "共有メッセージとして要約する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("読み手がすぐ理解できる要約とアクション整理を重視してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "basic-schedule-share".to_string(),
            title: "スケジュール感の共有".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "プロジェクトの見通しとマイルストーンを共有する。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "スケジュール共有シート".to_string(),
                summary: "全体像とマイルストーンを整理し、関係者に共有する。".to_string(),
                audience: "開発チーム、ビジネス担当".to_string(),
                problems: vec!["全体像が不透明".to_string(), "マイルストーンが曖昧".to_string(), "前提条件が共有されない".to_string()],
                goals: vec!["全体像の共有".to_string(), "重要マイルストーンの明示".to_string(), "前提条件の整理".to_string()],
                differentiators: vec!["マイルストーンテンプレ".to_string(), "判断ポイント整理".to_string()],
                scope: vec!["全体像整理".to_string(), "マイルストーン整理".to_string(), "判断ポイント整理".to_string()],
                constraints: vec!["初期計画は暫定".to_string(), "スプリントは2週間".to_string()],
                timeline: "今週中に共有".to_string(),
                success_criteria: vec!["マイルストーンが合意".to_string(), "次の判断ポイントが明確".to_string()],
                unique_edge: Some("見通し共有の練習に特化".to_string()),
                tech_stack: Some(vec!["Next.js".to_string(), "Axum".to_string()]),
                core_features: Some(vec!["マイルストーン表".to_string(), "前提メモ".to_string()]),
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "あなたはPMとしてプロジェクトのスケジュール感を共有します。全体像、マイルストーン、前提条件、次の判断ポイントを整理してください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "basic-schedule-m1".to_string(), title: "全体像と進め方を共有する".to_string(), description: None, order: 1 },
            ]),
            supplemental_info: Some("不確実性や前提条件を必ず共有してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "basic-docs-refine".to_string(),
            title: "既存資料の軽微な修正".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "資料を読み手に伝わる形に整える。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "資料修正メモ".to_string(),
                summary: "目的と対象を整理し、表現と構成を改善する。".to_string(),
                audience: "関係者、チームメンバー".to_string(),
                problems: vec!["表現が分かりにくい".to_string(), "構成が散漫".to_string(), "要点が伝わらない".to_string()],
                goals: vec!["目的の明確化".to_string(), "表現の改善".to_string(), "要点の強調".to_string()],
                differentiators: vec!["レビュー観点整理".to_string(), "要点ハイライト".to_string()],
                scope: vec!["目的整理".to_string(), "表現修正".to_string(), "要点整理".to_string()],
                constraints: vec!["軽微な修正のみ".to_string(), "既存構成は大きく変更しない".to_string()],
                timeline: "本日中に共有".to_string(),
                success_criteria: vec!["要点が伝わる".to_string(), "読みやすさが改善".to_string()],
                unique_edge: Some("軽微修正に集中".to_string()),
                tech_stack: Some(vec!["Next.js".to_string(), "Axum".to_string()]),
                core_features: Some(vec!["修正メモ".to_string(), "レビュー観点".to_string()]),
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "あなたはPMとして既存資料を軽微に修正します。目的と対象読者を整理し、表現と構成を改善してください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "basic-docs-m1".to_string(), title: "資料の目的と対象を整理する".to_string(), description: None, order: 1 },
                Mission { id: "basic-docs-m2".to_string(), title: "分かりにくい表現や構成を修正する".to_string(), description: None, order: 2 },
                Mission { id: "basic-docs-m3".to_string(), title: "要点を伝わる形でまとめる".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("読み手が迷わない構成と簡潔な表現を意識してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "basic-ticket-refine".to_string(),
            title: "チケット要件整理".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "曖昧なチケットを受入可能な形に分解し、スプリントに載せられる状態へ整理する。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "チケット精査セッション".to_string(),
                summary: "目的と受入条件を固め、開発が着手できる粒度に落とし込む。".to_string(),
                audience: "プロダクトオーナー、開発チーム、QA".to_string(),
                problems: vec!["目的が曖昧".to_string(), "受入条件が無い".to_string(), "依存が不明".to_string()],
                goals: vec!["受入基準の明文化".to_string(), "優先度と依存を整理".to_string(), "工数見積もり可能な粒度にする".to_string()],
                differentiators: vec!["シンプルなACテンプレ".to_string(), "依存を見える化".to_string()],
                scope: vec!["目的確認".to_string(), "AC定義".to_string(), "依存・リスク整理".to_string()],
                constraints: vec!["既存スプリントの枠内で調整".to_string(), "非機能要件も確認".to_string()],
                timeline: "今週のスプリント前".to_string(),
                success_criteria: vec!["ACが3〜5件明文化".to_string(), "依存/リスクが特定されている".to_string()],
                unique_edge: Some("受入基準作りと依存洗い出しに集中".to_string()),
                tech_stack: Some(vec!["Next.js".to_string(), "Axum".to_string()]),
                core_features: Some(vec!["ACテンプレ".to_string(), "依存チェックリスト".to_string()]),
            },
            mode: "freeform".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "あなたはPMとして曖昧なチケットをスプリントに載せられる形へ精査します。目的、受入条件、依存/リスクを明文化してください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "basic-ticket-m1".to_string(), title: "課題の目的とゴールを確認する".to_string(), description: None, order: 1 },
                Mission { id: "basic-ticket-m2".to_string(), title: "受入条件(AC)を定義する".to_string(), description: None, order: 2 },
                Mission { id: "basic-ticket-m3".to_string(), title: "依存関係とリスクを明文化する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("ACは観測可能な期待値で書き、依存は担当と期日をセットで整理してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "basic-ticket-splitting".to_string(),
            title: "チケット分割と優先度付け".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "大きな依頼を分割し、優先順位と依存を整理する。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "チケット分割メモ".to_string(),
                summary: "大きな依頼を実行可能な単位に分割し、優先順位を付ける。".to_string(),
                audience: "開発チーム、QA、PM".to_string(),
                problems: vec!["タスクが大きすぎる".to_string(), "優先度が曖昧".to_string(), "依存関係が不明".to_string()],
                goals: vec!["チケットの分割".to_string(), "優先順位の明確化".to_string(), "依存関係の整理".to_string()],
                differentiators: vec!["分割テンプレ".to_string(), "優先度ラベル".to_string()],
                scope: vec!["タスク分割".to_string(), "優先度整理".to_string(), "依存整理".to_string()],
                constraints: vec!["スプリント開始前に整理".to_string(), "最小リリースを意識".to_string()],
                timeline: "今週中に整理".to_string(),
                success_criteria: vec!["分割済みチケット".to_string(), "優先順位が合意".to_string()],
                unique_edge: Some("最小スコープ設計を練習".to_string()),
                tech_stack: Some(vec!["Next.js".to_string(), "Axum".to_string()]),
                core_features: Some(vec!["分割リスト".to_string(), "優先度タグ".to_string()]),
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "あなたはPMとして大きな依頼を分割します。価値の高い順に優先度を付け、依存関係とリスクを整理してください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "basic-split-m1".to_string(), title: "チケットを実行可能な単位に分割する".to_string(), description: None, order: 1 },
                Mission { id: "basic-split-m2".to_string(), title: "優先度と価値を整理する".to_string(), description: None, order: 2 },
                Mission { id: "basic-split-m3".to_string(), title: "依存関係とリスクを明文化する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("最初のリリースで必要な最小スコープを意識してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "basic-acceptance-review".to_string(),
            title: "受入条件のレビュー".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "既存の受入条件を見直し、検証可能性を高める。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "受入条件レビュー".to_string(),
                summary: "既存の受入条件を見直し、検証可能な形に整える。".to_string(),
                audience: "プロダクトオーナー、開発チーム、QA".to_string(),
                problems: vec!["受入条件が曖昧".to_string(), "検証方法が不明".to_string(), "依存が見えない".to_string()],
                goals: vec!["受入条件の明確化".to_string(), "検証可能性の向上".to_string(), "依存確認".to_string()],
                differentiators: vec!["ACテンプレ".to_string(), "検証観点メモ".to_string()],
                scope: vec!["ACレビュー".to_string(), "表現修正".to_string(), "依存確認".to_string()],
                constraints: vec!["既存チケットを前提".to_string(), "短時間レビュー".to_string()],
                timeline: "スプリント開始前".to_string(),
                success_criteria: vec!["ACが明確".to_string(), "検証方法が合意".to_string()],
                unique_edge: Some("受入条件の磨き込みに集中".to_string()),
                tech_stack: Some(vec!["Next.js".to_string(), "Axum".to_string()]),
                core_features: Some(vec!["ACリスト".to_string(), "修正メモ".to_string()]),
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "あなたはPMとして受入条件をレビューします。曖昧な表現を修正し、検証可能な形に整えてください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "basic-acceptance-m1".to_string(), title: "受入条件をレビューする".to_string(), description: None, order: 1 },
                Mission { id: "basic-acceptance-m2".to_string(), title: "曖昧な表現を修正する".to_string(), description: None, order: 2 },
                Mission { id: "basic-acceptance-m3".to_string(), title: "依存関係とリスクを確認する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("Given-When-Then形式や観測可能な条件を意識してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "basic-unknowns-discovery".to_string(),
            title: "不明点の洗い出し".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "曖昧な前提や未決事項を可視化し、確認計画を立てる。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "不明点整理シート".to_string(),
                summary: "要件の不明点を洗い出し、確認計画を立てるための整理シート。".to_string(),
                audience: "PM、開発、ビジネス担当".to_string(),
                problems: vec!["前提が曖昧".to_string(), "確認先が不明".to_string(), "判断が遅れる".to_string()],
                goals: vec!["不明点の可視化".to_string(), "確認先の特定".to_string(), "解消計画の策定".to_string()],
                differentiators: vec!["不明点テンプレ".to_string(), "確認優先度ラベル".to_string()],
                scope: vec!["不明点整理".to_string(), "確認先整理".to_string(), "優先度付け".to_string()],
                constraints: vec!["スプリント計画前に整理".to_string(), "関係者3〜5名".to_string()],
                timeline: "今週中に確認".to_string(),
                success_criteria: vec!["不明点リストが完成".to_string(), "確認計画が合意".to_string()],
                unique_edge: Some("曖昧さの可視化に特化".to_string()),
                tech_stack: Some(vec!["Next.js".to_string(), "Axum".to_string()]),
                core_features: Some(vec!["不明点一覧".to_string(), "確認先メモ".to_string()]),
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "あなたはPMとして要件の不明点を洗い出します。確認先・優先度・解消方法を整理してください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "basic-unknowns-m1".to_string(), title: "不明点・未決事項を列挙する".to_string(), description: None, order: 1 },
                Mission { id: "basic-unknowns-m2".to_string(), title: "確認先と必要情報を整理する".to_string(), description: None, order: 2 },
                Mission { id: "basic-unknowns-m3".to_string(), title: "優先度と解消計画を決める".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("影響度が高い不明点から優先して解消してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "basic-testcase-design".to_string(),
            title: "テストケース作成".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "新機能の仕様からスモーク/回帰テストケースを洗い出し、漏れのない最小集合を作る。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "テスト計画メモ".to_string(),
                summary: "正常系と主要な異常系を素早く列挙し、優先度を付ける。".to_string(),
                audience: "QA、開発チーム、PM".to_string(),
                problems: vec!["ケース漏れ".to_string(), "優先度不明".to_string(), "前提データ不備".to_string()],
                goals: vec!["必須ケースの明確化".to_string(), "前提データと環境の定義".to_string(), "優先度付け".to_string()],
                differentiators: vec!["スモーク優先リスト".to_string(), "前提データチェック".to_string()],
                scope: vec!["正常系".to_string(), "主要異常系".to_string(), "前提データ・環境".to_string()],
                constraints: vec!["テスト時間は1日以内".to_string(), "主要ブラウザ2種のみ".to_string()],
                timeline: "今週のデプロイ前".to_string(),
                success_criteria: vec!["スモークケース5〜10件".to_string(), "前提データ/環境が明確".to_string()],
                unique_edge: Some("短時間で漏れに強い最小セットを作る練習".to_string()),
                tech_stack: Some(vec!["Next.js".to_string(), "Axum".to_string()]),
                core_features: Some(vec!["ケース一覧".to_string(), "優先度タグ".to_string()]),
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "新機能のテストケースを作成してください。プロダクトや機能の詳細について質問があれば遠慮なく聞いてください！".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "basic-test-m1".to_string(), title: "正常系と主要なユーザーフローを列挙する".to_string(), description: None, order: 1 },
                Mission { id: "basic-test-m2".to_string(), title: "主要な異常系と境界を決める".to_string(), description: None, order: 2 },
                Mission { id: "basic-test-m3".to_string(), title: "前提データ・環境・優先度を整理する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("カバレッジを意識しつつ、時間制約に収まる最小セットを優先してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "basic-test-viewpoints".to_string(),
            title: "テスト観点の洗い出しと優先度付け".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "仕様からテスト観点を洗い出し、リスクベースで優先度を付ける。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "テスト観点リスト".to_string(),
                summary: "仕様からテスト観点を整理し、優先度を付けるためのチェックリスト。".to_string(),
                audience: "QA、開発、PM".to_string(),
                problems: vec!["観点が漏れる".to_string(), "優先度が不明".to_string(), "前提条件が曖昧".to_string()],
                goals: vec!["観点の網羅".to_string(), "優先度付け".to_string(), "前提条件の明確化".to_string()],
                differentiators: vec!["観点テンプレ".to_string(), "リスク評価欄".to_string()],
                scope: vec!["観点洗い出し".to_string(), "優先度設定".to_string(), "前提条件整理".to_string()],
                constraints: vec!["テスト準備は半日以内".to_string(), "主要ブラウザのみ".to_string()],
                timeline: "次回リリース前".to_string(),
                success_criteria: vec!["観点リストが完成".to_string(), "優先度が合意".to_string()],
                unique_edge: Some("観点の整理に特化".to_string()),
                tech_stack: Some(vec!["Next.js".to_string(), "Axum".to_string()]),
                core_features: Some(vec!["観点一覧".to_string(), "優先度タグ".to_string()]),
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "あなたはQA/PMとしてテスト観点を洗い出し、影響度と頻度で優先順位を決めます。前提条件も整理してください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "basic-viewpoints-m1".to_string(), title: "主要なテスト観点を洗い出す".to_string(), description: None, order: 1 },
                Mission { id: "basic-viewpoints-m2".to_string(), title: "リスク/影響度で優先順位を付ける".to_string(), description: None, order: 2 },
                Mission { id: "basic-viewpoints-m3".to_string(), title: "前提条件と不足情報を整理する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("観点の抜け漏れがないか、仕様との対応を意識してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "basic-test-risk-review".to_string(),
            title: "テスト計画のリスクレビュー".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "既存のテスト計画を見直し、リスクベースで優先度を調整する。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "テスト計画レビュー".to_string(),
                summary: "高リスク領域のテスト優先度を見直すレビューセッション。".to_string(),
                audience: "QA、開発、PM".to_string(),
                problems: vec!["重要領域が抜ける".to_string(), "優先度が古い".to_string(), "前提条件が不明".to_string()],
                goals: vec!["高リスク領域の特定".to_string(), "優先度の再整理".to_string(), "前提条件の確認".to_string()],
                differentiators: vec!["リスクレビュー表".to_string(), "優先度再設定".to_string()],
                scope: vec!["高リスク領域整理".to_string(), "優先度再設定".to_string(), "前提条件確認".to_string()],
                constraints: vec!["時間は30分".to_string(), "直近リリースが近い".to_string()],
                timeline: "デプロイ前日".to_string(),
                success_criteria: vec!["優先度の再合意".to_string(), "テスト計画の更新".to_string()],
                unique_edge: Some("リスクベース見直しに特化".to_string()),
                tech_stack: Some(vec!["Next.js".to_string(), "Axum".to_string()]),
                core_features: Some(vec!["リスク一覧".to_string(), "優先度タグ".to_string()]),
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "あなたはQA/PMとして既存のテスト計画をレビューします。高リスク領域の優先度を見直し、前提条件を再整理してください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "basic-riskreview-m1".to_string(), title: "高リスク領域を特定する".to_string(), description: None, order: 1 },
                Mission { id: "basic-riskreview-m2".to_string(), title: "優先度と観点を再調整する".to_string(), description: None, order: 2 },
                Mission { id: "basic-riskreview-m3".to_string(), title: "前提条件と不足情報を整理する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("限られた時間で効果が高いテストに集中してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "basic-regression-smoke".to_string(),
            title: "回帰テストの最小セット整理".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "回帰テストの必須ケースを最小セットで整理する。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "回帰テスト整理メモ".to_string(),
                summary: "回帰テストの必須ケースを整理し、最小セットを合意する。".to_string(),
                audience: "QA、開発、PM".to_string(),
                problems: vec!["ケースが多すぎる".to_string(), "優先度が不明".to_string(), "前提条件が曖昧".to_string()],
                goals: vec!["必須ケースの整理".to_string(), "優先度の合意".to_string(), "前提条件の明確化".to_string()],
                differentiators: vec!["最小セットの定義".to_string(), "優先度タグ".to_string()],
                scope: vec!["回帰フロー整理".to_string(), "優先度設定".to_string(), "前提条件整理".to_string()],
                constraints: vec!["テスト時間は半日".to_string(), "主要フロー中心".to_string()],
                timeline: "リリース直前".to_string(),
                success_criteria: vec!["最小セットが合意".to_string(), "前提条件が明確".to_string()],
                unique_edge: Some("最小回帰セットの設計に特化".to_string()),
                tech_stack: Some(vec!["Next.js".to_string(), "Axum".to_string()]),
                core_features: Some(vec!["回帰フロー".to_string(), "優先度タグ".to_string()]),
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "あなたはQA/PMとして回帰テストの最小セットを整理します。必須フローと優先度、前提条件を明確にしてください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "basic-regression-m1".to_string(), title: "主要な回帰フローを洗い出す".to_string(), description: None, order: 1 },
                Mission { id: "basic-regression-m2".to_string(), title: "必須ケースの優先度を決める".to_string(), description: None, order: 2 },
                Mission { id: "basic-regression-m3".to_string(), title: "前提データと環境を整理する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("最小セットで品質を担保できる範囲を意識してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        // Test-case scenarios
        Scenario {
            id: "test-login".to_string(),
            title: "ログイン機能".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "ログイン機能のテストケースを設計する。".to_string(),
            scenario_type: None,
            feature_mockup: Some(FeatureMockup {
                component: "login".to_string(),
                description: "メールアドレスとパスワードで認証するログインフォームです。".to_string(),
            }),
            product: ProductInfo {
                name: "".to_string(),
                summary: "".to_string(),
                audience: "".to_string(),
                problems: vec![],
                goals: vec![],
                differentiators: vec![],
                scope: vec![],
                constraints: vec![],
                timeline: "".to_string(),
                success_criteria: vec![],
                unique_edge: None,
                tech_stack: None,
                core_features: None,
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "ログイン機能のテストケースを作成してください。プロダクトや機能の詳細について質問があれば遠慮なく聞いてください！".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "test-login-m1".to_string(), title: "正常系ログインフローを列挙する".to_string(), description: None, order: 1 },
                Mission { id: "test-login-m2".to_string(), title: "異常系・セキュリティ観点を洗い出す".to_string(), description: None, order: 2 },
                Mission { id: "test-login-m3".to_string(), title: "前提条件とテストデータを整理する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("ログイン仕様:\n- メールアドレス: 有効なメール形式のみ\n- パスワード: 8文字以上\n- ログイン試行: 5回失敗で15分ロック\n- 「ログイン状態を保持」: 30日間有効\nパスワード誤り、アカウントロック、セッション管理などの観点を意識してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "test-form".to_string(),
            title: "フォーム機能".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "フォーム機能のテストケースを設計する。".to_string(),
            scenario_type: None,
            feature_mockup: Some(FeatureMockup {
                component: "form".to_string(),
                description: "お問い合わせフォームです。入力検証とエラー表示を確認できます。".to_string(),
            }),
            product: ProductInfo {
                name: "".to_string(),
                summary: "".to_string(),
                audience: "".to_string(),
                problems: vec![],
                goals: vec![],
                differentiators: vec![],
                scope: vec![],
                constraints: vec![],
                timeline: "".to_string(),
                success_criteria: vec![],
                unique_edge: None,
                tech_stack: None,
                core_features: None,
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "フォーム機能のテストケースを作成してください。プロダクトや機能の詳細について質問があれば遠慮なく聞いてください！".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "test-form-m1".to_string(), title: "入力バリデーションケースを列挙する".to_string(), description: None, order: 1 },
                Mission { id: "test-form-m2".to_string(), title: "エラー表示と操作性を検討する".to_string(), description: None, order: 2 },
                Mission { id: "test-form-m3".to_string(), title: "前提条件とテストデータを整理する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("フォーム仕様:\n- 必須項目: 名前、メール、カテゴリ、内容、同意\n- メール: 有効な形式のみ\n- 電話: 任意、10〜13桁の数字とハイフン\n- 内容: 10〜1000文字\n必須/任意、フォーマット、文字種、長さ制限などの観点を網羅してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "test-file-upload".to_string(),
            title: "ファイルアップロード機能".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "ファイルアップロード機能のテストケースを設計する。".to_string(),
            scenario_type: None,
            feature_mockup: Some(FeatureMockup {
                component: "file-upload".to_string(),
                description: "ドラッグ＆ドロップ対応のファイルアップロード機能です。".to_string(),
            }),
            product: ProductInfo {
                name: "".to_string(),
                summary: "".to_string(),
                audience: "".to_string(),
                problems: vec![],
                goals: vec![],
                differentiators: vec![],
                scope: vec![],
                constraints: vec![],
                timeline: "".to_string(),
                success_criteria: vec![],
                unique_edge: None,
                tech_stack: None,
                core_features: None,
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "ファイルアップロード機能のテストケースを作成してください。プロダクトや機能の詳細について質問があれば遠慮なく聞いてください！".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "test-upload-m1".to_string(), title: "ファイル種別とサイズ検証ケースを列挙する".to_string(), description: None, order: 1 },
                Mission { id: "test-upload-m2".to_string(), title: "エラー処理とセキュリティ観点を検討する".to_string(), description: None, order: 2 },
                Mission { id: "test-upload-m3".to_string(), title: "前提条件とテストデータを整理する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("アップロード仕様:\n- 対応形式: JPEG, PNG, GIF, PDF\n- 最大サイズ: 10MB/ファイル\n- 最大ファイル数: 5\n- ドラッグ＆ドロップ対応\n- アップロード失敗時は再試行可能\n拡張子偽装、ウイルスチェック、ストレージ容量などのセキュリティ観点を意識してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "test-password-reset".to_string(),
            title: "パスワード再設定機能".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "パスワード再設定機能のテストケースを設計する。".to_string(),
            scenario_type: None,
            feature_mockup: Some(FeatureMockup {
                component: "password-reset".to_string(),
                description: "メール認証コードでパスワードを再設定するフローです。".to_string(),
            }),
            product: ProductInfo {
                name: "".to_string(),
                summary: "".to_string(),
                audience: "".to_string(),
                problems: vec![],
                goals: vec![],
                differentiators: vec![],
                scope: vec![],
                constraints: vec![],
                timeline: "".to_string(),
                success_criteria: vec![],
                unique_edge: None,
                tech_stack: None,
                core_features: None,
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "パスワード再設定機能のテストケースを作成してください。プロダクトや機能の詳細について質問があれば遠慮なく聞いてください！".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "test-reset-m1".to_string(), title: "再設定フローの正常系を列挙する".to_string(), description: None, order: 1 },
                Mission { id: "test-reset-m2".to_string(), title: "セキュリティ・異常系観点を洗い出す".to_string(), description: None, order: 2 },
                Mission { id: "test-reset-m3".to_string(), title: "前提条件とテストデータを整理する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("再設定仕様:\n- 再設定メールは登録済みアドレスにのみ送信\n- 確認コード有効期限: 10分\n- コード入力失敗: 3回で無効化\n- 新しいパスワード: 8文字以上、英数字を含む\nトークン有効期限、再利用防止、既存セッション無効化の観点を意識してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "test-search-filter".to_string(),
            title: "検索・絞り込み機能".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "検索・絞り込み機能のテストケースを設計する。".to_string(),
            scenario_type: None,
            feature_mockup: Some(FeatureMockup {
                component: "search-filter".to_string(),
                description: "一覧画面で検索・絞り込み・並び替えができる機能です。".to_string(),
            }),
            product: ProductInfo {
                name: "".to_string(),
                summary: "".to_string(),
                audience: "".to_string(),
                problems: vec![],
                goals: vec![],
                differentiators: vec![],
                scope: vec![],
                constraints: vec![],
                timeline: "".to_string(),
                success_criteria: vec![],
                unique_edge: None,
                tech_stack: None,
                core_features: None,
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "検索・絞り込み機能のテストケースを作成してください。プロダクトや機能の詳細について質問があれば遠慮なく聞いてください！".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "test-search-m1".to_string(), title: "検索クエリの正常系・境界値を列挙する".to_string(), description: None, order: 1 },
                Mission { id: "test-search-m2".to_string(), title: "絞り込みと並び替えの組み合わせを検討する".to_string(), description: None, order: 2 },
                Mission { id: "test-search-m3".to_string(), title: "0件・エラー・操作性観点を整理する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("検索仕様:\n- キーワード検索: 部分一致（2文字以上で検索）\n- 絞り込み: カテゴリ、ステータス、担当者\n- 並び替え: 更新日、作成日、名前\n- 検索条件は画面遷移後も保持\n複合条件、0件表示、APIエラー、条件保持の観点を意識してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "test-notification-settings".to_string(),
            title: "通知設定機能".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "通知設定機能のテストケースを設計する。".to_string(),
            scenario_type: None,
            feature_mockup: Some(FeatureMockup {
                component: "notification-settings".to_string(),
                description: "チャネル別・イベント別に通知受信設定を変更できる機能です。".to_string(),
            }),
            product: ProductInfo {
                name: "".to_string(),
                summary: "".to_string(),
                audience: "".to_string(),
                problems: vec![],
                goals: vec![],
                differentiators: vec![],
                scope: vec![],
                constraints: vec![],
                timeline: "".to_string(),
                success_criteria: vec![],
                unique_edge: None,
                tech_stack: None,
                core_features: None,
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "通知設定機能のテストケースを作成してください。プロダクトや機能の詳細について質問があれば遠慮なく聞いてください！".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "test-notify-m1".to_string(), title: "チャネル別・イベント別設定を列挙する".to_string(), description: None, order: 1 },
                Mission { id: "test-notify-m2".to_string(), title: "保存反映と権限エラー観点を洗い出す".to_string(), description: None, order: 2 },
                Mission { id: "test-notify-m3".to_string(), title: "前提条件と優先度を整理する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("通知設定仕様:\n- チャネル: メール、プッシュ、Slack\n- 通知種別: 週次サマリー、メンション、障害アラート\n- Do Not Disturb: 22:00〜07:00\n- 設定変更は保存ボタン押下で反映\n権限拒否、連携失敗、再ログイン後保持、複数端末反映の観点を意識してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "test-profile-edit".to_string(),
            title: "プロフィール編集機能".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "プロフィール編集機能のテストケースを設計する。".to_string(),
            scenario_type: None,
            feature_mockup: Some(FeatureMockup {
                component: "profile-edit".to_string(),
                description: "プロフィール情報と画像を更新できる編集画面です。".to_string(),
            }),
            product: ProductInfo {
                name: "".to_string(),
                summary: "".to_string(),
                audience: "".to_string(),
                problems: vec![],
                goals: vec![],
                differentiators: vec![],
                scope: vec![],
                constraints: vec![],
                timeline: "".to_string(),
                success_criteria: vec![],
                unique_edge: None,
                tech_stack: None,
                core_features: None,
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "プロフィール編集機能のテストケースを作成してください。プロダクトや機能の詳細について質問があれば遠慮なく聞いてください！".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "test-profile-m1".to_string(), title: "入力項目バリデーションを列挙する".to_string(), description: None, order: 1 },
                Mission { id: "test-profile-m2".to_string(), title: "画像アップロードと保存処理を検討する".to_string(), description: None, order: 2 },
                Mission { id: "test-profile-m3".to_string(), title: "権限・公開範囲観点を整理する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("プロフィール仕様:\n- 表示名: 必須、最大50文字\n- 自己紹介: 任意、最大160文字\n- 画像: PNG/JPEG/WEBP、最大5MB\n- 保存時に最終更新日時をチェックし、競合時は再編集を促す\n入力制約、競合検知、公開範囲、権限観点を意識してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        // Requirement-definition scenarios
        Scenario {
            id: "basic-requirement-definition-doc".to_string(),
            title: "ログイン機能".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "ログイン機能の要件定義を行う。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "".to_string(),
                summary: "".to_string(),
                audience: "".to_string(),
                problems: vec![],
                goals: vec![],
                differentiators: vec![],
                scope: vec![],
                constraints: vec![],
                timeline: "".to_string(),
                success_criteria: vec![],
                unique_edge: None,
                tech_stack: None,
                core_features: None,
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "お疲れ様です、POの鈴木です！ログイン機能で『ログインできない』問い合わせが増えているので、最低限のログイン体験を安定化したいです。要件定義をお願いできますか？".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(60.0),
            missions: Some(vec![
                Mission { id: "basic-reqdoc-m2".to_string(), title: "ログイン成功/失敗時の要件を定義する".to_string(), description: None, order: 1 },
            ]),
            supplemental_info: Some("会話で段階的に要件を合意してください。目的・対象ユーザーの確認、受入条件と非対象の整理、不明点の確認先と期限の設定まで行ってください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "basic-requirement-hearing-plan".to_string(),
            title: "問い合わせフォーム機能".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "問い合わせフォーム機能の要件定義を行う。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "".to_string(),
                summary: "".to_string(),
                audience: "".to_string(),
                problems: vec![],
                goals: vec![],
                differentiators: vec![],
                scope: vec![],
                constraints: vec![],
                timeline: "".to_string(),
                success_criteria: vec![],
                unique_edge: None,
                tech_stack: None,
                core_features: None,
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "問い合わせフォームの離脱が増えています。CSは入力項目を減らしたい一方で、法務は同意取得を厳密にしたいと言っています。要件を整理してもらえますか？".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(60.0),
            missions: Some(vec![
                Mission { id: "basic-reqhear-m1".to_string(), title: "目的・対象ユーザーを確認する".to_string(), description: None, order: 1 },
                Mission { id: "basic-reqhear-m2".to_string(), title: "入力/送信/エラー時の受入条件を定義する".to_string(), description: None, order: 2 },
                Mission { id: "basic-reqhear-m3".to_string(), title: "非対象と不明点の確認アクションを整理する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("会話で段階的に要件を合意してください。入力バリデーション、送信失敗時の扱い、同意取得の境界を明確にし、不明点の確認計画まで整理してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "basic-requirement-user-story".to_string(),
            title: "ファイルアップロード機能".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "ファイルアップロード機能の要件定義を行う。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "".to_string(),
                summary: "".to_string(),
                audience: "".to_string(),
                problems: vec![],
                goals: vec![],
                differentiators: vec![],
                scope: vec![],
                constraints: vec![],
                timeline: "".to_string(),
                success_criteria: vec![],
                unique_edge: None,
                tech_stack: None,
                core_features: None,
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "サポート向けに添付ファイルアップロードを追加したいです。営業は早期リリースを求めていますが、インフラはサイズ制限を厳守してほしいと言っています。要件を整理してください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(60.0),
            missions: Some(vec![
                Mission { id: "basic-reqstory-m1".to_string(), title: "目的・対象ユーザーを確認する".to_string(), description: None, order: 1 },
                Mission { id: "basic-reqstory-m2".to_string(), title: "形式/サイズ/失敗時の受入条件を定義する".to_string(), description: None, order: 2 },
                Mission { id: "basic-reqstory-m3".to_string(), title: "非対象と不明点の確認アクションを整理する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("会話で段階的に要件を合意してください。許可形式、サイズ上限、失敗時リトライの期待挙動を明確化し、不明点の確認計画まで整理してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "basic-requirement-nfr".to_string(),
            title: "パスワード再設定機能".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "パスワード再設定機能の要件定義を行う。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "".to_string(),
                summary: "".to_string(),
                audience: "".to_string(),
                problems: vec![],
                goals: vec![],
                differentiators: vec![],
                scope: vec![],
                constraints: vec![],
                timeline: "".to_string(),
                success_criteria: vec![],
                unique_edge: None,
                tech_stack: None,
                core_features: None,
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "パスワード再設定の問い合わせが急増しています。UXは簡単な導線を求めていますが、セキュリティは厳格な本人確認を求めています。要件を整理してもらえますか？".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(60.0),
            missions: Some(vec![
                Mission { id: "basic-reqnfr-m1".to_string(), title: "目的・対象ユーザーを確認する".to_string(), description: None, order: 1 },
                Mission { id: "basic-reqnfr-m2".to_string(), title: "本人確認/期限/完了条件の受入条件を定義する".to_string(), description: None, order: 2 },
                Mission { id: "basic-reqnfr-m3".to_string(), title: "非対象と不明点の確認アクションを整理する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("会話で段階的に要件を合意してください。トークン有効期限と不正利用防止を含む受入条件を明確化し、不明点の確認計画まで整理してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "basic-requirement-priority-matrix".to_string(),
            title: "検索・絞り込み機能".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "検索・絞り込み機能の要件定義を行う。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "".to_string(),
                summary: "".to_string(),
                audience: "".to_string(),
                problems: vec![],
                goals: vec![],
                differentiators: vec![],
                scope: vec![],
                constraints: vec![],
                timeline: "".to_string(),
                success_criteria: vec![],
                unique_edge: None,
                tech_stack: None,
                core_features: None,
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "検索・絞り込み機能の改善依頼があります。PMは多条件検索を求めていますが、開発からは性能劣化の懸念が出ています。要件を整理しましょう。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(60.0),
            missions: Some(vec![
                Mission { id: "basic-reqprio-m1".to_string(), title: "目的・対象ユーザーを確認する".to_string(), description: None, order: 1 },
                Mission { id: "basic-reqprio-m2".to_string(), title: "検索条件/ソート/0件表示の受入条件を定義する".to_string(), description: None, order: 2 },
                Mission { id: "basic-reqprio-m3".to_string(), title: "非対象と不明点の確認アクションを整理する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("会話で段階的に要件を合意してください。複合条件検索と0件表示の期待挙動を明確化し、性能懸念に関する確認計画まで整理してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "basic-requirement-risk-check".to_string(),
            title: "通知設定機能".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "通知設定機能の要件定義を行う。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "".to_string(),
                summary: "".to_string(),
                audience: "".to_string(),
                problems: vec![],
                goals: vec![],
                differentiators: vec![],
                scope: vec![],
                constraints: vec![],
                timeline: "".to_string(),
                success_criteria: vec![],
                unique_edge: None,
                tech_stack: None,
                core_features: None,
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "通知設定を見直したいです。マーケは通知頻度を上げたい一方で、ユーザーからは通知過多の不満が来ています。要件定義を手伝ってください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(60.0),
            missions: Some(vec![
                Mission { id: "basic-reqrisk-m1".to_string(), title: "目的・対象ユーザーを確認する".to_string(), description: None, order: 1 },
                Mission { id: "basic-reqrisk-m2".to_string(), title: "チャネル/頻度/保存反映の受入条件を定義する".to_string(), description: None, order: 2 },
                Mission { id: "basic-reqrisk-m3".to_string(), title: "非対象と不明点の確認アクションを整理する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("会話で段階的に要件を合意してください。保存後の反映と権限拒否時の挙動を含む受入条件を定義し、不明点の確認計画まで整理してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "basic-requirement-consensus".to_string(),
            title: "プロフィール編集機能".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "プロフィール編集機能の要件定義を行う。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "".to_string(),
                summary: "".to_string(),
                audience: "".to_string(),
                problems: vec![],
                goals: vec![],
                differentiators: vec![],
                scope: vec![],
                constraints: vec![],
                timeline: "".to_string(),
                success_criteria: vec![],
                unique_edge: None,
                tech_stack: None,
                core_features: None,
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "プロフィール編集を改善したいです。利用者は即時保存を期待していますが、開発は同時編集時の競合を懸念しています。要件を整理してください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(60.0),
            missions: Some(vec![
                Mission { id: "basic-reqconsensus-m1".to_string(), title: "目的・対象ユーザーを確認する".to_string(), description: None, order: 1 },
                Mission { id: "basic-reqconsensus-m2".to_string(), title: "入力制約/保存/競合時の受入条件を定義する".to_string(), description: None, order: 2 },
                Mission { id: "basic-reqconsensus-m3".to_string(), title: "非対象と不明点の確認アクションを整理する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("会話で段階的に要件を合意してください。保存失敗時と競合時の期待挙動を含む受入条件を明確化し、不明点の確認計画まで整理してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        // Coming scenarios (BASIC discipline)
        Scenario {
            id: "coming-stakeholder-negotiation".to_string(),
            title: "ステークホルダー優先度交渉".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "営業と開発の対立を整理し、合意形成を進める。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "".to_string(),
                summary: "".to_string(),
                audience: "".to_string(),
                problems: vec![],
                goals: vec![],
                differentiators: vec![],
                scope: vec![],
                constraints: vec![],
                timeline: "".to_string(),
                success_criteria: vec![],
                unique_edge: None,
                tech_stack: None,
                core_features: None,
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "営業は『今月中に新機能を出したい』、開発は『品質基準を満たさない限りリリースできない』と主張しています。対立点を整理し、合意形成に向けた交渉を進めてください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(60.0),
            missions: Some(vec![
                Mission { id: "coming-stakeholder-m1".to_string(), title: "対立点と共通目的を明確化する".to_string(), description: None, order: 1 },
                Mission { id: "coming-stakeholder-m2".to_string(), title: "譲歩案と判断基準を提示する".to_string(), description: None, order: 2 },
                Mission { id: "coming-stakeholder-m3".to_string(), title: "合意事項・保留事項・次アクションを確定する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("会話の最後に、合意事項・保留事項・次アクション（担当/期限）を明文化してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "coming-priority-tradeoff-workshop".to_string(),
            title: "優先度トレードオフ".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "複数の候補案を比較し、段階リリース計画を決定する。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "".to_string(),
                summary: "".to_string(),
                audience: "".to_string(),
                problems: vec![],
                goals: vec![],
                differentiators: vec![],
                scope: vec![],
                constraints: vec![],
                timeline: "".to_string(),
                success_criteria: vec![],
                unique_edge: None,
                tech_stack: None,
                core_features: None,
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "次リリース候補として『高速検索』『通知改善』『管理画面改修』の3案があります。価値・工数・リスクを比較し、段階リリースの合意案を作ってください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(60.0),
            missions: Some(vec![
                Mission { id: "coming-tradeoff-m1".to_string(), title: "比較軸を定義して各案を評価する".to_string(), description: None, order: 1 },
                Mission { id: "coming-tradeoff-m2".to_string(), title: "採用案と却下案を整理する".to_string(), description: None, order: 2 },
                Mission { id: "coming-tradeoff-m3".to_string(), title: "段階リリース計画と判断理由を合意する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("会話の最後に、採用案・却下案・判断理由を明文化してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "coming-decision-log-alignment".to_string(),
            title: "意思決定ログ共有と認識合わせ".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "意思決定ログを整理し、認識ズレを解消する。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "".to_string(),
                summary: "".to_string(),
                audience: "".to_string(),
                problems: vec![],
                goals: vec![],
                differentiators: vec![],
                scope: vec![],
                constraints: vec![],
                timeline: "".to_string(),
                success_criteria: vec![],
                unique_edge: None,
                tech_stack: None,
                core_features: None,
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "先週決めた『段階リリース方針』について、営業と開発で認識にズレが出ています。意思決定ログを整理し、共有メッセージと確認ポイントを作成してください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(60.0),
            missions: Some(vec![
                Mission { id: "coming-decisionlog-m1".to_string(), title: "ズレている認識ポイントを特定する".to_string(), description: None, order: 1 },
                Mission { id: "coming-decisionlog-m2".to_string(), title: "意思決定の背景と根拠を再整理する".to_string(), description: None, order: 2 },
                Mission { id: "coming-decisionlog-m3".to_string(), title: "共有文面と確認ポイントを確定する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("会話の最後に、共有文面（要点）と確認ポイント（3項目）を提示してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "coming-sprint-retrospective".to_string(),
            title: "スプリント振り返り".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "スプリント振り返りで改善アクションを整理する。".to_string(),
            scenario_type: Some(ScenarioType::Basic),
            feature_mockup: None,
            product: ProductInfo {
                name: "".to_string(),
                summary: "".to_string(),
                audience: "".to_string(),
                problems: vec![],
                goals: vec![],
                differentiators: vec![],
                scope: vec![],
                constraints: vec![],
                timeline: "".to_string(),
                success_criteria: vec![],
                unique_edge: None,
                tech_stack: None,
                core_features: None,
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "スプリントふりかえりの進め方と改善アクションを整理してください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(60.0),
            missions: Some(vec![
                Mission { id: "coming-retro-m1".to_string(), title: "改善アクションを整理する".to_string(), description: None, order: 1 },
            ]),
            supplemental_info: Some("Keep/Problem/Try を使って、具体的な改善アクションを示してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "coming-release-readiness-review".to_string(),
            title: "リリース準備レビュー".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "リリース準備状況を確認し、Go/No-Goを判断する。".to_string(),
            scenario_type: Some(ScenarioType::Basic),
            feature_mockup: None,
            product: ProductInfo {
                name: "".to_string(),
                summary: "".to_string(),
                audience: "".to_string(),
                problems: vec![],
                goals: vec![],
                differentiators: vec![],
                scope: vec![],
                constraints: vec![],
                timeline: "".to_string(),
                success_criteria: vec![],
                unique_edge: None,
                tech_stack: None,
                core_features: None,
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "リリース準備レビューのチェック項目と判断基準を整理してください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(60.0),
            missions: Some(vec![
                Mission { id: "coming-release-m1".to_string(), title: "Go/No-Go判断材料を整理する".to_string(), description: None, order: 1 },
            ]),
            supplemental_info: Some("品質、運用、告知、ロールバック観点のチェック項目を示してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "coming-kpi-review-action".to_string(),
            title: "KPIレビューと改善アクション".to_string(),
            discipline: ScenarioDiscipline::Basic,
            description: "KPIを振り返り、次スプリントの改善施策を決定する。".to_string(),
            scenario_type: Some(ScenarioType::Basic),
            feature_mockup: None,
            product: ProductInfo {
                name: "".to_string(),
                summary: "".to_string(),
                audience: "".to_string(),
                problems: vec![],
                goals: vec![],
                differentiators: vec![],
                scope: vec![],
                constraints: vec![],
                timeline: "".to_string(),
                success_criteria: vec![],
                unique_edge: None,
                tech_stack: None,
                core_features: None,
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "主要KPIの振り返りと次スプリントの改善アクションを整理してください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(60.0),
            missions: Some(vec![
                Mission { id: "coming-kpi-m1".to_string(), title: "改善施策を整理する".to_string(), description: None, order: 1 },
            ]),
            supplemental_info: Some("KPIの現状、課題仮説、施策、検証方法を明確にしてください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        // Coming scenarios (CHALLENGE discipline)
        Scenario {
            id: "coming-incident-response".to_string(),
            title: "P1障害: ログイン不能バグの緊急対応".to_string(),
            discipline: ScenarioDiscipline::Challenge,
            description: "P1障害の初動対応と報告を行う。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "".to_string(),
                summary: "".to_string(),
                audience: "".to_string(),
                problems: vec![],
                goals: vec![],
                differentiators: vec![],
                scope: vec![],
                constraints: vec![],
                timeline: "".to_string(),
                success_criteria: vec![],
                unique_edge: None,
                tech_stack: None,
                core_features: None,
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "本番環境で『ログインAPIが500エラーを返し続け、全ユーザーがログイン不能』というP1障害が発生しました。初動対応、影響範囲、社内外への初回報告を会話で整理してください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(60.0),
            missions: Some(vec![
                Mission { id: "coming-incident-m1".to_string(), title: "影響範囲と緊急度を確定する".to_string(), description: None, order: 1 },
                Mission { id: "coming-incident-m2".to_string(), title: "初動対応と暫定復旧方針を決める".to_string(), description: None, order: 2 },
                Mission { id: "coming-incident-m3".to_string(), title: "初回報告とエスカレーションを実行する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("終了条件: 影響範囲、初動アクション、連絡先、初回報告文が確定していること。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "coming-incident-triage-escalation".to_string(),
            title: "P2障害: 決済遅延バグ".to_string(),
            discipline: ScenarioDiscipline::Challenge,
            description: "P2障害のトリアージとエスカレーション判断を行う。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "".to_string(),
                summary: "".to_string(),
                audience: "".to_string(),
                problems: vec![],
                goals: vec![],
                differentiators: vec![],
                scope: vec![],
                constraints: vec![],
                timeline: "".to_string(),
                success_criteria: vec![],
                unique_edge: None,
                tech_stack: None,
                core_features: None,
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "本番環境で『決済は成功しているが完了通知反映が最大20分遅延する』不具合が発生しています。P2想定で、優先度判定とエスカレーション判断を会話で進めてください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(60.0),
            missions: Some(vec![
                Mission { id: "coming-triage-m1".to_string(), title: "事象の再現条件と影響ユーザーを特定する".to_string(), description: None, order: 1 },
                Mission { id: "coming-triage-m2".to_string(), title: "優先度と対応期限を決定する".to_string(), description: None, order: 2 },
                Mission { id: "coming-triage-m3".to_string(), title: "エスカレーション先と報告リズムを確定する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("終了条件: 重大度、判断根拠、エスカレーション経路、次回報告時刻が確定していること。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "coming-postmortem-followup".to_string(),
            title: "P3障害: 表示崩れバグの再発防止".to_string(),
            discipline: ScenarioDiscipline::Challenge,
            description: "P3障害の原因分析と再発防止策を決定する。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "".to_string(),
                summary: "".to_string(),
                audience: "".to_string(),
                problems: vec![],
                goals: vec![],
                differentiators: vec![],
                scope: vec![],
                constraints: vec![],
                timeline: "".to_string(),
                success_criteria: vec![],
                unique_edge: None,
                tech_stack: None,
                core_features: None,
            },
            mode: "guided".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "Androidの一部端末でプロフィール画面のボタンが重なって表示崩れするP3不具合が報告されました。原因分析、優先度判断、再発防止策を会話で整理してください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(60.0),
            missions: Some(vec![
                Mission { id: "coming-postmortem-m1".to_string(), title: "事実と原因仮説を切り分ける".to_string(), description: None, order: 1 },
                Mission { id: "coming-postmortem-m2".to_string(), title: "恒久対応と暫定対応を決定する".to_string(), description: None, order: 2 },
                Mission { id: "coming-postmortem-m3".to_string(), title: "再発防止アクションを担当・期限付きで合意する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("終了条件: 再発防止アクション（担当/期限）と検証方法が明文化されていること。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "challenge-project-rescue".to_string(),
            title: "遅延プロジェクト立て直し (チャレンジ)".to_string(),
            discipline: ScenarioDiscipline::Challenge,
            description: "遅延しているプロジェクトでスコープ再交渉とリカバリ計画を短時間でまとめる。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "リカバリプラン".to_string(),
                summary: "納期リスクを抑えつつ、価値を守るための再計画を提示する。".to_string(),
                audience: "経営層、プロダクトオーナー、開発リード".to_string(),
                problems: vec!["スケジュール遅延".to_string(), "スコープ肥大".to_string(), "ステークホルダー不安".to_string()],
                goals: vec!["最小価値リリースの合意".to_string(), "リカバリ計画策定".to_string(), "コミュニケーション強化".to_string()],
                differentiators: vec!["スコープカット候補の明示".to_string(), "リカバリの優先度付け".to_string()],
                scope: vec!["遅延要因分析".to_string(), "スコープ再構成".to_string(), "リカバリ計画".to_string()],
                constraints: vec!["納期は固定".to_string(), "品質バーは下げない".to_string()],
                timeline: "2週間で方向性合意".to_string(),
                success_criteria: vec!["MVPリリースに合意".to_string(), "リスク/前提が透明化".to_string()],
                unique_edge: Some("交渉と計画立案を同時に練習".to_string()),
                tech_stack: Some(vec!["Next.js".to_string(), "Axum".to_string()]),
                core_features: Some(vec!["リカバリメモ".to_string(), "ステークホルダー通知".to_string()]),
            },
            mode: "freeform".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "あなたは遅延しているプロジェクトのPM/PMOです。遅延要因を整理し、スコープ再交渉とリカバリ計画をまとめてください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "challenge-rescue-m1".to_string(), title: "遅延要因とリスクを特定する".to_string(), description: None, order: 1 },
                Mission { id: "challenge-rescue-m2".to_string(), title: "スコープ再構成と優先度を決める".to_string(), description: None, order: 2 },
                Mission { id: "challenge-rescue-m3".to_string(), title: "リカバリ計画とコミュニケーション案を作る".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("品質バーを下げずに間に合わせる打ち手（並行作業・カット案・リソース振替）を検討してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "challenge-deadline-advance".to_string(),
            title: "リリース期限の突然の前倒し (チャレンジ)".to_string(),
            discipline: ScenarioDiscipline::Challenge,
            description: "外部要因で期限が前倒しになり、影響分析と打ち手を提案する。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "前倒し対応ブリーフ".to_string(),
                summary: "期限前倒しの影響を整理し、選択肢を合意するためのブリーフ。".to_string(),
                audience: "経営層、プロダクトオーナー、開発リード".to_string(),
                problems: vec!["期限前倒し".to_string(), "リソース不足".to_string(), "品質リスク".to_string()],
                goals: vec!["影響範囲の整理".to_string(), "打ち手の提示".to_string(), "合意形成".to_string()],
                differentiators: vec!["影響範囲チェック".to_string(), "トレードオフ整理".to_string()],
                scope: vec!["影響分析".to_string(), "代替案提示".to_string(), "合意形成".to_string()],
                constraints: vec!["期限は変更不可".to_string(), "主要機能は維持".to_string()],
                timeline: "1週間以内に意思決定".to_string(),
                success_criteria: vec!["合意済みの対応方針".to_string(), "次アクションが明文化".to_string()],
                unique_edge: Some("前倒し対応の意思決定を練習".to_string()),
                tech_stack: Some(vec!["Next.js".to_string(), "Axum".to_string()]),
                core_features: Some(vec!["影響チェック表".to_string(), "対応方針メモ".to_string()]),
            },
            mode: "freeform".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "あなたはPM/PMOとしてリリース期限が突然前倒しになった状況に対応します。影響範囲を整理し、複数の打ち手と合意形成を進めてください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "challenge-deadline-m1".to_string(), title: "影響範囲を洗い出す".to_string(), description: None, order: 1 },
                Mission { id: "challenge-deadline-m2".to_string(), title: "選択肢とトレードオフを提示する".to_string(), description: None, order: 2 },
                Mission { id: "challenge-deadline-m3".to_string(), title: "合意した方針と次アクションを決める".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("品質・スコープ・リソースのトレードオフを明確にしてください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "challenge-progress-visibility".to_string(),
            title: "進捗が見えない状況への対応 (チャレンジ)".to_string(),
            discipline: ScenarioDiscipline::Challenge,
            description: "進捗が見えない状況で可視化と打ち手を設計する。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "進捗可視化メモ".to_string(),
                summary: "最小限の指標と報告リズムを設計し、進捗を見える化する。".to_string(),
                audience: "開発リード、プロダクトオーナー".to_string(),
                problems: vec!["進捗が不透明".to_string(), "報告が遅い".to_string(), "リスクが見えない".to_string()],
                goals: vec!["進捗可視化".to_string(), "リスク把握".to_string(), "報告リズムの合意".to_string()],
                differentiators: vec!["最小指標の定義".to_string(), "報告テンプレ".to_string()],
                scope: vec!["指標設計".to_string(), "報告設計".to_string(), "次アクション".to_string()],
                constraints: vec!["追加工数は最小".to_string(), "週次報告".to_string()],
                timeline: "今週中に可視化開始".to_string(),
                success_criteria: vec!["進捗指標が合意".to_string(), "報告リズムが開始".to_string()],
                unique_edge: Some("最小限の可視化設計に特化".to_string()),
                tech_stack: Some(vec!["Next.js".to_string(), "Axum".to_string()]),
                core_features: Some(vec!["進捗メトリクス".to_string(), "報告テンプレ".to_string()]),
            },
            mode: "freeform".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "あなたはPM/PMOとして進捗が見えない状況に対応します。最小限の可視化手段と報告リズムを設計し、次アクションを決めてください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "challenge-visibility-m1".to_string(), title: "進捗可視化の指標と方法を決める".to_string(), description: None, order: 1 },
                Mission { id: "challenge-visibility-m2".to_string(), title: "リスク要因を整理する".to_string(), description: None, order: 2 },
                Mission { id: "challenge-visibility-m3".to_string(), title: "報告と次アクションを合意する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("最小限の指標で現状を把握できるようにしてください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "challenge-quality-fire".to_string(),
            title: "品質問題の緊急対応と優先度調整 (チャレンジ)".to_string(),
            discipline: ScenarioDiscipline::Challenge,
            description: "品質問題が発生し、緊急対応と優先度を再調整する。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "品質緊急対応メモ".to_string(),
                summary: "品質問題の原因と影響を整理し、対応方針を合意する。".to_string(),
                audience: "開発リード、プロダクトオーナー".to_string(),
                problems: vec!["重大バグ".to_string(), "ユーザー影響".to_string(), "優先度の混乱".to_string()],
                goals: vec!["原因の整理".to_string(), "対応優先度の合意".to_string(), "関係者説明".to_string()],
                differentiators: vec!["緊急対応テンプレ".to_string(), "優先度マトリクス".to_string()],
                scope: vec!["原因分析".to_string(), "優先度整理".to_string(), "合意形成".to_string()],
                constraints: vec!["時間が限られる".to_string(), "リソースは固定".to_string()],
                timeline: "当日中に対応方針決定".to_string(),
                success_criteria: vec!["対応方針が合意".to_string(), "ユーザー影響の説明が完了".to_string()],
                unique_edge: Some("緊急対応の意思決定を練習".to_string()),
                tech_stack: Some(vec!["Next.js".to_string(), "Axum".to_string()]),
                core_features: Some(vec!["影響整理".to_string(), "優先度マトリクス".to_string()]),
            },
            mode: "freeform".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "あなたはPM/PMOとして品質問題に緊急対応します。原因と影響を整理し、優先度と対応方針を合意してください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "challenge-quality-m1".to_string(), title: "品質問題の原因と影響を整理する".to_string(), description: None, order: 1 },
                Mission { id: "challenge-quality-m2".to_string(), title: "緊急対応と優先度を決める".to_string(), description: None, order: 2 },
                Mission { id: "challenge-quality-m3".to_string(), title: "関係者への説明と合意を行う".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("ユーザー影響とリリース計画のトレードオフを明確にしてください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "challenge-ambiguous-request".to_string(),
            title: "要件が曖昧な依頼への対応 (チャレンジ)".to_string(),
            discipline: ScenarioDiscipline::Challenge,
            description: "曖昧な要求を具体化し、合意できるスコープを作る。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "要件整理ブリーフ".to_string(),
                summary: "曖昧な要求を具体化し、仮スコープと確認事項を整理する。".to_string(),
                audience: "事業責任者、開発リード".to_string(),
                problems: vec!["要求が曖昧".to_string(), "成功条件が不明".to_string(), "判断が遅い".to_string()],
                goals: vec!["成功条件の明確化".to_string(), "仮スコープの合意".to_string(), "確認事項の整理".to_string()],
                differentiators: vec!["成功条件テンプレ".to_string(), "仮スコープ整理".to_string()],
                scope: vec!["成功条件整理".to_string(), "仮スコープ整理".to_string(), "確認事項整理".to_string()],
                constraints: vec!["期限は厳しい".to_string(), "関係者合意が必要".to_string()],
                timeline: "今週中に合意".to_string(),
                success_criteria: vec!["成功条件が合意".to_string(), "次アクションが明文化".to_string()],
                unique_edge: Some("曖昧要求の具体化を練習".to_string()),
                tech_stack: Some(vec!["Next.js".to_string(), "Axum".to_string()]),
                core_features: Some(vec!["成功条件メモ".to_string(), "確認事項リスト".to_string()]),
            },
            mode: "freeform".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "あなたはPM/PMOとして曖昧な依頼に対応します。成功条件と仮スコープを整理し、確認事項と次アクションを合意してください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "challenge-ambiguous-m1".to_string(), title: "成功条件を明確化する".to_string(), description: None, order: 1 },
                Mission { id: "challenge-ambiguous-m2".to_string(), title: "仮スコープと非対象を整理する".to_string(), description: None, order: 2 },
                Mission { id: "challenge-ambiguous-m3".to_string(), title: "確認事項と次アクションを決める".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("曖昧さを放置せず、仮置きでも合意を取って進めてください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "challenge-scope-addition".to_string(),
            title: "追加スコープ要求の交渉 (チャレンジ)".to_string(),
            discipline: ScenarioDiscipline::Challenge,
            description: "追加要求に対してスコープ調整と合意形成を行う。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "追加要求ブリーフ".to_string(),
                summary: "追加要求の背景を整理し、代替案と影響を比較する。".to_string(),
                audience: "顧客、上長、開発リード".to_string(),
                problems: vec!["追加要求".to_string(), "納期圧迫".to_string(), "リソース不足".to_string()],
                goals: vec!["背景整理".to_string(), "代替案提示".to_string(), "合意形成".to_string()],
                differentiators: vec!["影響比較表".to_string(), "合意メモ".to_string()],
                scope: vec!["背景整理".to_string(), "代替案提示".to_string(), "合意形成".to_string()],
                constraints: vec!["期限は固定".to_string(), "リソース追加は限定的".to_string()],
                timeline: "今週中に合意".to_string(),
                success_criteria: vec!["合意済みの対応方針".to_string(), "次アクションが明文化".to_string()],
                unique_edge: Some("追加要求の交渉に特化".to_string()),
                tech_stack: Some(vec!["Next.js".to_string(), "Axum".to_string()]),
                core_features: Some(vec!["代替案表".to_string(), "影響整理".to_string()]),
            },
            mode: "freeform".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "あなたはPM/PMOとして追加スコープ要求の交渉を行います。代替案と影響を提示し、合意内容をまとめてください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "challenge-scopeadd-m1".to_string(), title: "追加要求の背景と目的を整理する".to_string(), description: None, order: 1 },
                Mission { id: "challenge-scopeadd-m2".to_string(), title: "代替案と影響を提示する".to_string(), description: None, order: 2 },
                Mission { id: "challenge-scopeadd-m3".to_string(), title: "合意内容と次アクションを決める".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("期限・品質・リソースのトレードオフを明確にしてください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "challenge-scope-negotiation".to_string(),
            title: "スコープ／リソース交渉 (チャレンジ)".to_string(),
            discipline: ScenarioDiscipline::Challenge,
            description: "顧客や上長とスコープ削減かリソース増加を交渉し、合意形成する。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "交渉ブリーフィング".to_string(),
                summary: "事前に代替案とインパクトを整理し、短時間で合意を目指す。".to_string(),
                audience: "顧客、上長、開発リード".to_string(),
                problems: vec!["スコープ肥大".to_string(), "リソース不足".to_string(), "意思決定が遅い".to_string()],
                goals: vec!["代替案の提示".to_string(), "インパクトの明示".to_string(), "合意形成".to_string()],
                differentiators: vec!["BATNA整理".to_string(), "譲れない条件の明確化".to_string()],
                scope: vec!["代替案作成".to_string(), "インパクト整理".to_string(), "合意手順".to_string()],
                constraints: vec!["交渉時間30分".to_string(), "現行リリース日固定".to_string()],
                timeline: "今週中に再合意".to_string(),
                success_criteria: vec!["合意済みのスコープ or リソース調整".to_string(), "合意内容が明文化".to_string()],
                unique_edge: Some("交渉準備と合意文書作成を練習".to_string()),
                tech_stack: Some(vec!["Next.js".to_string(), "Axum".to_string()]),
                core_features: Some(vec!["提案メモ".to_string(), "インパクト表".to_string()]),
            },
            mode: "freeform".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "あなたはPM/PMOとしてスコープまたはリソースの交渉を行います。代替案とインパクトを提示し、短時間で合意を得てください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "challenge-negotiation-m1".to_string(), title: "譲れない条件とBATNAを整理する".to_string(), description: None, order: 1 },
                Mission { id: "challenge-negotiation-m2".to_string(), title: "スコープ/リソースの代替案とインパクトをまとめる".to_string(), description: None, order: 2 },
                Mission { id: "challenge-negotiation-m3".to_string(), title: "合意プロセスとステークホルダー調整を計画する".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("合意後に残るリスクとフォローアップを必ず記録してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "challenge-impossible-request".to_string(),
            title: "エンジニアから「無理です」と言われる (チャレンジ)".to_string(),
            discipline: ScenarioDiscipline::Challenge,
            description: "技術的制約を理解し、代替案と合意を作る。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "実現性レビュー".to_string(),
                summary: "制約を整理し、代替案と合意形成を進めるためのレビュー。".to_string(),
                audience: "開発リード、ビジネス担当".to_string(),
                problems: vec!["技術的制約".to_string(), "期待値ギャップ".to_string(), "判断遅延".to_string()],
                goals: vec!["制約の明確化".to_string(), "代替案の提示".to_string(), "合意形成".to_string()],
                differentiators: vec!["制約整理テンプレ".to_string(), "代替案比較表".to_string()],
                scope: vec!["制約整理".to_string(), "代替案比較".to_string(), "合意形成".to_string()],
                constraints: vec!["既存リリース日固定".to_string(), "リソース追加は難しい".to_string()],
                timeline: "今週中に方向性決定".to_string(),
                success_criteria: vec!["合意済みの対応方針".to_string(), "次アクションが明文化".to_string()],
                unique_edge: Some("実現性と期待値の調整を練習".to_string()),
                tech_stack: Some(vec!["Next.js".to_string(), "Axum".to_string()]),
                core_features: Some(vec!["制約メモ".to_string(), "代替案表".to_string()]),
            },
            mode: "freeform".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "あなたはPMとしてエンジニアから実現困難と指摘された状況に対応します。制約を整理し、代替案と合意形成を進めてください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "challenge-impossible-m1".to_string(), title: "制約・根拠を明確化する".to_string(), description: None, order: 1 },
                Mission { id: "challenge-impossible-m2".to_string(), title: "代替案と影響を比較する".to_string(), description: None, order: 2 },
                Mission { id: "challenge-impossible-m3".to_string(), title: "合意した対応と次アクションを決める".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("無理の理由を尊重しつつ、実現可能な落とし所を探してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "challenge-conflict-mediation".to_string(),
            title: "コンフリクト調整 (チャレンジ)".to_string(),
            discipline: ScenarioDiscipline::Challenge,
            description: "開発とQA・ビジネスの対立をファシリテートし、合意に導く。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "調整セッション".to_string(),
                summary: "論点を分解し、事実と解釈を整理して合意を形成する。".to_string(),
                audience: "開発リード、QA、ビジネスオーナー".to_string(),
                problems: vec!["優先度衝突".to_string(), "品質バーの違い".to_string(), "感情的な対立".to_string()],
                goals: vec!["論点の明確化".to_string(), "合意された着地点".to_string(), "フォローアクションの明記".to_string()],
                differentiators: vec!["事実/解釈の分離".to_string(), "合意メモテンプレ".to_string()],
                scope: vec!["論点整理".to_string(), "合意形成".to_string(), "フォロー計画".to_string()],
                constraints: vec!["1時間以内".to_string(), "主要ステークホルダー3者".to_string()],
                timeline: "今週中に解決方向性を決定".to_string(),
                success_criteria: vec!["合意事項と決定が明文化".to_string(), "フォロータスクが割り当て済み".to_string()],
                unique_edge: Some("ファシリテーションと合意文書化を練習".to_string()),
                tech_stack: Some(vec!["Next.js".to_string(), "Axum".to_string()]),
                core_features: Some(vec!["論点リスト".to_string(), "合意メモ".to_string()]),
            },
            mode: "freeform".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "あなたはPM/PMOとして対立が発生している会議をファシリテートします。論点を整理し、合意とフォローアップをまとめてください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "challenge-conflict-m1".to_string(), title: "論点と事実/解釈を分けて整理する".to_string(), description: None, order: 1 },
                Mission { id: "challenge-conflict-m2".to_string(), title: "合意の選択肢と条件を提示する".to_string(), description: None, order: 2 },
                Mission { id: "challenge-conflict-m3".to_string(), title: "フォロータスクと担当を決める".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("感情的な対立を避けるため、事実と解釈を分けて提示してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "challenge-priority-conflict".to_string(),
            title: "優先度対立のファシリテーション (チャレンジ)".to_string(),
            discipline: ScenarioDiscipline::Challenge,
            description: "関係者間の優先度対立を整理し、合意に導く。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "優先度調整セッション".to_string(),
                summary: "論点と優先度を整理し、合意形成とフォローを行う。".to_string(),
                audience: "開発リード、営業、事業責任者".to_string(),
                problems: vec!["優先度衝突".to_string(), "意思決定の停滞".to_string(), "関係性の悪化".to_string()],
                goals: vec!["論点整理".to_string(), "合意形成".to_string(), "フォローアクション".to_string()],
                differentiators: vec!["論点整理テンプレ".to_string(), "合意メモ".to_string()],
                scope: vec!["論点整理".to_string(), "合意形成".to_string(), "フォロー計画".to_string()],
                constraints: vec!["短時間で合意".to_string(), "関係者3〜4名".to_string()],
                timeline: "今週中に合意".to_string(),
                success_criteria: vec!["合意事項が明文化".to_string(), "フォロータスクが決定".to_string()],
                unique_edge: Some("優先度対立の調整を練習".to_string()),
                tech_stack: Some(vec!["Next.js".to_string(), "Axum".to_string()]),
                core_features: Some(vec!["論点整理".to_string(), "合意メモ".to_string()]),
            },
            mode: "freeform".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "あなたはPM/PMOとして優先度対立をファシリテートします。論点を整理し、合意とフォローアップをまとめてください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "challenge-priority-m1".to_string(), title: "対立の論点を整理する".to_string(), description: None, order: 1 },
                Mission { id: "challenge-priority-m2".to_string(), title: "合意の選択肢と条件を提示する".to_string(), description: None, order: 2 },
                Mission { id: "challenge-priority-m3".to_string(), title: "フォロータスクと担当を決める".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("事実と解釈を分け、公平なファシリテーションを心がけてください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "challenge-stakeholder-misalignment".to_string(),
            title: "ステークホルダーとの認識ズレ解消 (チャレンジ)".to_string(),
            discipline: ScenarioDiscipline::Challenge,
            description: "期待値のズレを解消し、共通認識と再発防止を作る。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "認識合わせセッション".to_string(),
                summary: "認識ズレを整理し、共通認識と再発防止プロセスを合意する。".to_string(),
                audience: "事業責任者、開発、営業".to_string(),
                problems: vec!["期待値ズレ".to_string(), "情報不足".to_string(), "意思決定の摩擦".to_string()],
                goals: vec!["ズレの可視化".to_string(), "共通認識の合意".to_string(), "再発防止".to_string()],
                differentiators: vec!["ズレ整理テンプレ".to_string(), "確認プロセス設計".to_string()],
                scope: vec!["ズレ特定".to_string(), "共通認識整理".to_string(), "再発防止策".to_string()],
                constraints: vec!["関係者全員の合意が必要".to_string(), "1回の会議で方向性確定".to_string()],
                timeline: "今週中に認識合わせ".to_string(),
                success_criteria: vec!["共通認識が明文化".to_string(), "確認プロセスが合意".to_string()],
                unique_edge: Some("認識ズレ解消のファシリテーションを練習".to_string()),
                tech_stack: Some(vec!["Next.js".to_string(), "Axum".to_string()]),
                core_features: Some(vec!["論点整理".to_string(), "合意メモ".to_string()]),
            },
            mode: "freeform".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "あなたはPM/PMOとしてステークホルダー間の認識ズレを解消します。ズレの原因を整理し、共通認識と再発防止プロセスを合意してください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "challenge-alignment-m1".to_string(), title: "ズレているポイントを特定する".to_string(), description: None, order: 1 },
                Mission { id: "challenge-alignment-m2".to_string(), title: "共通認識を再整理する".to_string(), description: None, order: 2 },
                Mission { id: "challenge-alignment-m3".to_string(), title: "再発防止の確認プロセスを決める".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("合意後の確認プロセス（定例やチェックポイント）まで設計してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
        Scenario {
            id: "challenge-user-perspective".to_string(),
            title: "ユーザー視点が抜けていることへの気づき (チャレンジ)".to_string(),
            discipline: ScenarioDiscipline::Challenge,
            description: "ユーザー視点の欠落に気づき、価値に立ち返る。".to_string(),
            scenario_type: None,
            feature_mockup: None,
            product: ProductInfo {
                name: "ユーザー価値再確認".to_string(),
                summary: "ユーザー行動を整理し、価値と最小改善案を再確認する。".to_string(),
                audience: "プロダクトオーナー、開発、営業".to_string(),
                problems: vec!["ユーザー視点不足".to_string(), "価値の説明不足".to_string(), "改善の優先度が不明".to_string()],
                goals: vec!["ユーザー行動の整理".to_string(), "価値の明確化".to_string(), "最小改善案の合意".to_string()],
                differentiators: vec!["ユーザー行動テンプレ".to_string(), "価値整理メモ".to_string()],
                scope: vec!["行動フロー整理".to_string(), "価値整理".to_string(), "改善案提示".to_string()],
                constraints: vec!["短期間で合意".to_string(), "現行計画に影響最小".to_string()],
                timeline: "今週中に方針決定".to_string(),
                success_criteria: vec!["ユーザー価値が明文化".to_string(), "改善案が合意".to_string()],
                unique_edge: Some("ユーザー視点回復の意思決定を練習".to_string()),
                tech_stack: Some(vec!["Next.js".to_string(), "Axum".to_string()]),
                core_features: Some(vec!["行動フロー".to_string(), "価値メモ".to_string()]),
            },
            mode: "freeform".to_string(),
            behavior: ScenarioBehavior::default(),
            kickoff_prompt: "あなたはPM/PMOとしてユーザー視点が抜けていることに気づきます。ユーザー行動を整理し、最小限の改善案と合意を作ってください。".to_string(),
            evaluation_criteria: vec![
                EvaluationCategory { name: "方針提示とリード力".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "計画と実行可能性".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "コラボレーションとフィードバック".to_string(), weight: 25.0, score: None, feedback: None },
                EvaluationCategory { name: "リスク/前提管理と改善姿勢".to_string(), weight: 25.0, score: None, feedback: None },
            ],
            passing_score: Some(70.0),
            missions: Some(vec![
                Mission { id: "challenge-user-m1".to_string(), title: "ユーザー行動フローを整理する".to_string(), description: None, order: 1 },
                Mission { id: "challenge-user-m2".to_string(), title: "価値と影響を説明する".to_string(), description: None, order: 2 },
                Mission { id: "challenge-user-m3".to_string(), title: "最小改善案と合意をまとめる".to_string(), description: None, order: 3 },
            ]),
            supplemental_info: Some("機能ではなく価値に立ち返り、最小の打ち手を提案してください。".to_string()),
            pmbok_knowledge_areas: None,
        },
    ];

    for scenario in scenarios.iter_mut() {
        if scenario.scenario_type.is_none() {
            scenario.scenario_type = scenario_type_for_id(&scenario.id);
        }
        if scenario.pmbok_knowledge_areas.is_none() {
            scenario.pmbok_knowledge_areas = pmbok_areas_for_id(&scenario.id);
        }
    }

    scenarios
}

fn pmbok_areas_for_id(id: &str) -> Option<Vec<PmbokKnowledgeArea>> {
    use PmbokKnowledgeArea::*;
    let areas = match id {
        // Basic scenarios
        "basic-intro-alignment" => vec![Stakeholder, Communication],
        "basic-meeting-minutes" => vec![Communication, Integration],
        "basic-schedule-share" => vec![Schedule, Communication],
        "basic-docs-refine" => vec![Communication, Quality],
        "basic-ticket-refine" => vec![Scope, Quality],
        "basic-ticket-splitting" => vec![Scope, Schedule],
        "basic-acceptance-review" => vec![Quality, Scope],
        "basic-unknowns-discovery" => vec![Risk, Integration],
        "basic-testcase-design" => vec![Quality],
        "basic-test-viewpoints" => vec![Quality, Risk],
        "basic-test-risk-review" => vec![Quality, Risk],
        "basic-regression-smoke" => vec![Quality],
        // Test-case scenarios
        "test-login" => vec![Quality],
        "test-form" => vec![Quality],
        "test-file-upload" => vec![Quality],
        "test-password-reset" => vec![Quality, Risk],
        "test-search-filter" => vec![Quality],
        "test-notification-settings" => vec![Quality, Communication],
        "test-profile-edit" => vec![Quality],
        // Requirement-definition scenarios
        "basic-requirement-definition-doc" => vec![Scope, Quality],
        "basic-requirement-hearing-plan" => vec![Scope, Stakeholder],
        "basic-requirement-user-story" => vec![Scope, Quality],
        "basic-requirement-nfr" => vec![Scope, Quality, Risk],
        "basic-requirement-priority-matrix" => vec![Scope, Quality],
        "basic-requirement-risk-check" => vec![Scope, Communication],
        "basic-requirement-consensus" => vec![Scope, Stakeholder],
        // Coming scenarios (BASIC discipline)
        "coming-stakeholder-negotiation" => vec![Stakeholder, Communication],
        "coming-priority-tradeoff-workshop" => vec![Scope, Schedule],
        "coming-decision-log-alignment" => vec![Communication, Integration],
        "coming-sprint-retrospective" => vec![Integration, Quality],
        "coming-release-readiness-review" => vec![Quality, Risk],
        "coming-kpi-review-action" => vec![Integration, Scope],
        // Coming scenarios (CHALLENGE discipline)
        "coming-incident-response" => vec![Risk, Communication, Integration],
        "coming-incident-triage-escalation" => vec![Risk, Communication],
        "coming-postmortem-followup" => vec![Quality, Risk],
        // Challenge scenarios
        "challenge-project-rescue" => vec![Integration, Schedule, Risk],
        "challenge-deadline-advance" => vec![Schedule, Scope, Stakeholder],
        "challenge-progress-visibility" => vec![Communication, Integration],
        "challenge-quality-fire" => vec![Quality, Risk, Communication],
        "challenge-ambiguous-request" => vec![Scope, Stakeholder],
        "challenge-scope-addition" => vec![Scope, Stakeholder, Schedule],
        "challenge-scope-negotiation" => vec![Scope, Stakeholder, Procurement],
        "challenge-impossible-request" => vec![Scope, Stakeholder, Risk],
        "challenge-conflict-mediation" => vec![Resource, Stakeholder, Communication],
        "challenge-priority-conflict" => vec![Stakeholder, Scope, Communication],
        "challenge-stakeholder-misalignment" => vec![Stakeholder, Communication],
        "challenge-user-perspective" => vec![Scope, Stakeholder, Quality],
        _ => return None,
    };
    Some(areas)
}

#[derive(Debug, Serialize, Deserialize, ToSchema, Clone)]
#[serde(rename_all = "camelCase")]
pub struct ScenarioBehavior {
    pub user_led: Option<bool>,
    pub allow_proactive: Option<bool>,
    pub max_questions: Option<u32>,
    pub response_style: Option<String>,
    pub phase: Option<String>,
    pub single_response: Option<bool>,
    pub agent_response_enabled: Option<bool>,
}

impl Default for ScenarioBehavior {
    fn default() -> Self {
        Self {
            user_led: None,
            allow_proactive: None,
            max_questions: None,
            response_style: None,
            phase: None,
            single_response: None,
            agent_response_enabled: None,
        }
    }
}

// Add ScoringGuidelines for evaluation criteria
#[allow(dead_code)]
#[derive(Debug, Serialize, Deserialize, ToSchema, Clone)]
#[serde(rename_all = "camelCase")]
pub struct ScoringGuidelines {
    pub excellent: String,
    pub good: String,
    pub needs_improvement: String,
    pub poor: String,
}

// Add RatingCriterion (full version with guidelines)
#[allow(dead_code)]
#[derive(Debug, Serialize, Deserialize, ToSchema, Clone)]
#[serde(rename_all = "camelCase")]
pub struct RatingCriterion {
    pub id: String,
    pub name: String,
    pub weight: f32,
    pub description: String,
    pub scoring_guidelines: ScoringGuidelines,
}
