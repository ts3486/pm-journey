# Quickstart: Olivia PM Simulation Web Experience

## Prereqs
- Node 18+; pnpm/npm/yarn
- Rust 1.88+; cargo
- HTTPS-capable environment if enabling API

## Frontend (Next.js + Tailwind + TanStack)
1) `cd frontend`
2) Install deps: `pnpm install` (or npm/yarn)
3) Run dev server: `pnpm dev`
4) Key env (examples):
   - `NEXT_PUBLIC_API_BASE` (required; set to Axum host for API mode)
   - `NEXT_PUBLIC_OFFLINE_QUEUE=true` to enable queued sends when offline
   - `NEXT_PUBLIC_STORAGE_PREFIX=olivia_pm` to isolate local storage keys
5) Scenario catalog: defined in frontend config as Home categories (PMアシスタント/PM) → subcategories → scenarios; keep ids stable for session resume/history.
6) Tests: `pnpm test` (Vitest), `pnpm exec playwright test` for e2e chat/history flows.
7) Fonts: prefer system font stack or locally bundled JP font to avoid remote fetch failures during build/offline.

## Backend (Axum + utoipa)
1) `cd backend`
2) Run dev: `cargo run`
3) Tests: `cargo test` (unit/integration)
4) Expose OpenAPI from `specs/001-pm-simulation-web/contracts/openapi.yaml`; serve via utoipa.
5) Environment:
   - `GEMINI_API_KEY` to enable Gemini responses from the backend
   - `RUST_LOG=info`, bind host/port in `src/main.rs` as needed.
6) Manager comments: enable `/sessions/{id}/comments` endpoints if multi-user review is needed; anonymous/local mode requires no auth, API mode should enforce auth.

## Flows to validate
- Start session from Home → Scenario kickoff visible <3s on 4G.
- Home shows PM/PMO scenario rows; selecting a card starts a fresh session for that scenario with autosave.
- Gemini responses are generated by the backend using scenario-specific prompts (agent profile + scenario context).
- Resume saved session → transcript/actions/progress restored.
- Tag decisions/risks → action log updates; autosave after each message.
- Mark ready for evaluation → spinner, result within ~10s, history entry saved.
- History filters/search → export Markdown/JSON; optional share link if API enabled.
- Offline mode still queues messages locally, but agent replies require the backend API to be available.
